context:
  version: 0.7.17

package:
  name: moducomp
  version: ${{ version }}

source:
- url: https://pypi.org/packages/source/m/moducomp/moducomp-${{ version }}.tar.gz
  sha256: c2780812e19805007dbb85edb7fe5ca6e2d7f971c13114e5eb9ab9780cc48a28

build:
  script:
    - ${{ PYTHON }} -m pip install .
    - install -m 0755 scripts/download_eggnog_data.py ${{ PREFIX }}/bin/download_eggnog_data.py
  python:
    entry_points:
    - moducomp = moducomp.moducomp:app
    - download-eggnog-data = moducomp.moducomp:download_eggnog_data_cli
    - download_eggnog_data.py = moducomp.moducomp:download_eggnog_data_cli
  noarch: python

requirements:
  host:
  - python >=3.9,<3.12
  - flit >=3.2,<4
  - pip
  run:
  - python >=3.9,<3.12
  - typer >=0.9.1,<0.10.0
  - pandas >=1.5,<2.3
  - click ~=8.0.0
  - eggnog-mapper >=2.1.9,<2.2.0
  - kegg-pathways-completeness

tests:
- python:
    imports:
    - moducomp
    pip_check: true

about:
  summary: "moducomp: metabolic module completeness and complementarity in microbiomes"
  description: |-
    # moducomp

    moducomp is a bioinformatics pipeline for metabolic module completeness
    and metabolic complementarity analysis in microbiomes. It annotates proteins
    with eggNOG-mapper, maps KOs to KEGG modules, and reports completeness and
    complementarity across genome combinations.
  license: BSD-3-Clause
